/* ========== Tokens ========== */
$brand:        #ef4423;         // 주황
$brand-strong: #ef4423;
$ink:          #111;
$ink-2:        #373737;
$ink-3:        #6b7280;
$ink-4:        #9ca3af;
$bg:           #f7f7fb;         // 페이지 배경
$card:         #ffffff;
$shadow:       0 6px 16px rgba(0, 0, 0, 0.06);
$line:         #e5e7eb;
$radius-lg:    16px;
$radius-md:    12px;
$header-h:     56px;

/* ✅ 프로필 아바타 위치(위로 올리기) */
$avatar-offset: 16px;      // ✅ 기존 102px → 16px (훨씬 위로)
$avatar-offset-sm: 12px;   // ✅ 기존 106px → 12px (360px 이하)

/* 헤더 아래 흰 공백(카드와 헤더 사이 간격) 조절 */
$card-gap-top: 0px;
/* 56px 만큼 프로필 카드 위로 당김 (헤더 바로 아래 정렬) */
$pull-up: $header-h;

/* ✅ 키워드(.tags) 아래 흰색 공백 크기 */
$keywords-bottom-space: 24px;

/* ========== MainPage 컨테이너 ========== */
.main-page {
  background: $bg;
  min-height: 100vh;
  padding: 0 16px;
  padding-top: $header-h; // 고정 헤더 높이만큼 밀기
  font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif;
  color: $ink;

  /* ===== Header(AppBar) ===== */
  .header {
    position: fixed; top: 0; left: 0; right: 0;
    z-index: 100;
    height: $header-h;
    display: flex; align-items: center; justify-content: space-between;
    background: $card;
    padding: 0 16px;
    border-bottom: none; // 프로필 카드와 경계 제거
  }

  .logo {
    color: $brand;
    font-size: 22px;
    font-weight: 800;
    letter-spacing: .2px;
  }

  .icon-btn {
    border: 0; background: transparent;
    width: 44px; height: 44px;
    display: grid; place-items: center; cursor: pointer;

    .alarm-icon {
      width: 14.999924659729004px;
      height: 18.461538314819336px;
      display: block;
      opacity: 1;
      transform: none; /* angle: 0deg */
    }
  }

  /* ===== 프로필 카드 ===== */
  .profile-card {
    position: relative;
    background: $card;
    border-radius: 0 0 $radius-lg $radius-lg; // 상단 0: 헤더와 한 장처럼
    box-shadow: none;
    padding: 64px 16px 16px 16px; // 상단 패딩 증가: 헤더와 겹침 방지
    margin: -$pull-up -16px 20px;

    /* 2컬럼: 왼쪽 텍스트 / 오른쪽 아바타 */
    display: grid;
    grid-template-columns: 1fr 108px;
    column-gap: 14px;

    /* 정확히 상단 정렬 */
    align-items: start;

    /* 오른쪽: 프로필 이미지  */
    .profile-right {
      grid-column: 2;
      display: grid;
      align-items: start;
      justify-items: start;
      position: relative;

      /* ✅ 아바타를 "살짝만" 아래로 (= 위로 올라오게 수정) */
      transform: translateY($avatar-offset);
      will-change: transform;

      .profile-img {
        width: 100px; height: 100px;
        border-radius: 12%;
        background: #e9e9ec;
        display: grid; place-items: center;
        font-size: 32px; color: $ink-3;
        margin-bottom: 0;
      }
    }

    /* 왼쪽: 텍스트 */
    .profile-middle {
      grid-column: 1;
      display: flex; flex-direction: column; gap: 6px; min-width: 0;
      align-self: start;
      padding-top: 0;

      /* ✅ 키워드 아래 흰색 공백 */
      padding-bottom: $keywords-bottom-space;

      .name {
        display: flex; align-items: baseline; gap: 6px;
        line-height: 1.25; margin-bottom: 2px;
        .name-strong   { font-size: 17px; font-weight: 800; color: $ink; }
        .name-regular  { font-size: 17px; font-weight: 400; color: $ink; }
      }

      .school {
        display: flex; align-items: center; gap: 6px;
        font-size: 12px; color: $ink-4; line-height: 1.35; margin-bottom: 10px;
        .school-icon { width: 14px; height: 14px; object-fit: contain; }
      }

      .stats {
        font-size: 13px; color: $ink-2; line-height: 1.5; margin-top: 6px;
        .stats-strong { font-weight: 800; color: $ink; }
        .count        { margin-left: 4px; color: $brand; font-weight: 800; }
        .muted        { color: $ink-4; }
      }

      .tags {
        display: flex; gap: 8px; margin-top: 10px;
        .tag.pill {
          padding: 6px 10px; font-size: 12px; font-weight: 600;
          border-radius: 999px; background: #fff4ef; color: $brand;
          white-space: nowrap;
        }
      }
    }
  }

  /* ===== 섹션 타이틀 ===== */
  > h2.section-title {
    font-size: 15px; font-weight: 800; color: $ink;
    margin: 8px 0 16px;
  }

  /* ===== 내가 참여 중인 프로젝트 ===== */
  .my-projects {
    background: $card;
    border-radius: $radius-lg;
    box-shadow: none; /* ✅ 그림자 제거 */
    padding: 16px;
    margin-bottom: 16px;

    /* ✅✅ 메인 프로젝트 카드 리스트(세로 스크롤/세로 리스트 강제) */
    .main-project-carousel {
      display: flex !important;
      flex-direction: column !important;  // ✅ 세로
      gap: 12px !important;
      overflow-x: hidden !important;      // ✅ 가로 스크롤 차단
      width: 100%;
    }

    /* 프로젝트 목록(기존) */
    .project-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    /* 로딩/에러 상태 */
    .loading-state,
    .error-state {
      padding: 40px 16px;
      text-align: center;
      font-size: 14px;
      color: $ink-3;

      button {
        margin-top: 12px;
        padding: 8px 16px;
        background: $brand;
        color: #fff;
        border: none;
        border-radius: 8px;
        font-size: 13px;
        font-weight: 600;
        cursor: pointer;
        transition: transform 0.06s ease;

        &:active {
          transform: translateY(1px);
        }
      }
    }

    .empty-card {
      border-radius: $radius-lg;
      padding: 24px 16px;
      text-align: center;
      display: grid; place-items: center; row-gap: 12px;

      .empty-img { width: 128px; height: auto; display: block; margin-bottom: 4px; }
      .empty-text { font-size: 13px; color: #444; line-height: 1.6; }

      .primary-btn {
        margin-top: 8px;
        width: 240px;
        height: 44px;
        border: 0;
        border-radius: 999px;
        font-size: 14px; font-weight: 800; color: #fff;
        cursor: pointer; background: $brand;
        box-shadow: none; /* ✅ 버튼 그림자 제거 */
        transition: transform .06s ease;
        &:active { transform: translateY(1px); /* 그림자 제거 유지 */ }
      }
    }
  }

  /* ✅✅ 메인 TodoBox: 상세 페이지와 동일 폭/모양으로 보이게 */
  .main-todo-section {
    margin-left: -16px;
    margin-right: -16px;
    margin-top: 12px;
    width: auto;
  }

  .bottom-spacer { height: 84px; }

  /* ===== 프로젝트 지원하기 버튼 ===== */
  .support-btn-wrap {
    display: flex;
    justify-content: center;
    margin-bottom: 16px;
  }

  .support-btn {
    width: 260px;
    height: 48px;
    background: $brand;
    border: none;
    border-radius: 999px;
    font-size: 15px;
    font-weight: 800;
    color: #fff;
    cursor: pointer;
    box-shadow: none; /* ✅ 버튼 그림자 제거 */
    transition: transform 0.06s ease;

    &:hover { /* 그림자 효과 제거 상태 유지 */ }
    &:active { transform: translateY(1px); }
  }

  @media (max-width: 360px) {
    .profile-card {
      grid-template-columns: 1fr 84px;
      column-gap: 12px;

      /* ✅ 모바일에서도 아바타 위로 */
      .profile-right { transform: translateY($avatar-offset-sm); }
      .profile-right .profile-img { width: 76px; height: 76px; font-size: 26px; margin-bottom: 0; }
    }

    .my-projects .empty-card .empty-img { width: 112px; }

    .main-todo-section {
      margin-left: -16px;
      margin-right: -16px;
    }
  }
}
